<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css">
    <title>JustPost.</title>
</head>
<body class="bg-zinc-100">
   <Nav>
    <div class="w-full h-20 bg-white drop-shadow-md flex p-3 justify-between items-center">
        <h1 class="uppercase font-black text-4xl">justpost<span class="text-orange-500">.</span></h1>

        <div class="ml-28">
            <ul class="flex gap-32 text-2xl font-medium">
                <a href="/">
                    <li class="hover:bg-zinc-100 px-6  py-2 cursor-pointer"><img src="/home.png" class="w-9" alt=""></li>
                </a>
                <a href="/profile">
                    <li class="hover:bg-zinc-100 px-6  border-zinc-200  border-b-2  py-2 cursor-pointer"><img src="/user-sel.png" class="w-9" alt=""></li>
                </a>
                <a href="/logout">
                    <li class="hover:bg-zinc-100 px-6  py-2 cursor-pointer"><img src="/sign-out.png" class="w-9" alt=""></li>
                </a>
            </ul>
        </div>

        <div class="flex gap-5 items-center">
            <div class="searchbar"><input type="search" class="border-2 border-zinc-300 py-2 px-3 rounded-full outline-none w-64" placeholder="Search posts"></div>
           <div class="profile">
                <div class="w-16 h-16 bg-black rounded-full overflow-hidden"> <img src="/<%= user.profilePic %>" class="object-cover w-full h-full" alt=""></div>
            </div> 
            
        </div>
    </div>
   </Nav>

   <main class="flex flex-col gap-6 items-center mt-7">

    <!-- edit box -->
    <div class="w-2/5 h-80 bg-zinc-100 drop-shadow-xl border-2 fixed top-2/4 left-2/4 z-10 transform -translate-x-1/2 -translate-y-1/2 edit-box rounded-xl p-3 flex gap-3 flex-col items-center invisible"> <div class="flex items-center gap-2 self-start">
        <div class="profile">
            <div class="w-12 h-12 bg-black rounded-full overflow-hidden"> <img src="/<%= user.profilePic %>" class="w-full h-full object-cover" alt=""></div>
        </div>
        <h2 class="text-xl font-semibold"><%= user.name %></h2>
    </div>
    
    <form class="w-full h-3/4 flex gap-3 flex-col items-center" action="/user/home/post" method="post">
        <textarea name="content" id="userText" id="edit-box" class="border-b-2 bg-zinc-50 w-full h-4/5 p-2 text-xl rounded-xl outline-none" placeholder="What's on your mind, John?"></textarea>
        <div>
            <button type="button" class="bg-zinc-50 text-black px-11 border-2 rounded-3xl text-2xl font-semibold py-2 self-end" onclick="cancelEdit()">Cancel</button>
            <button type="submit" class="bg-blue-400 text-white px-11 rounded-3xl text-2xl font-semibold py-2 self-end">Update</button>
        </div>
        
    </form>
</div>
    <!-- edit box -->

    <div class=" w-2/5 h-48  bg-zinc-900 drop-shadow-md rounded-xl p-3 flex gap-3 flex-col items-center justify-end">
        
        <h1 class="font-bold text-white text-5xl"><%= user.name %><span class="text-orange-500">.</span></h1>
    </div>
    <div class="w-44 h-44 bg-black border-4 border-black rounded-full z-10 overflow-hidden absolute left-1/3 top-48">
        <img src="/<%= user.profilePic %>" class="w-full h-full object-cover" alt="">
    </div>
    
    <!-- <div class="write w-2/5 mt-20 h-60 bg-white drop-shadow-md rounded-xl flex items-center flex-wrap">
        
       
    </div> -->

    <div class=" w-2/5 h-96 mt-20  flex gap-6 items-center justify-center">
        <div class="w-2/4 h-full bg-zinc-200 drop-shadow-md p-3 rounded-xl flex flex-col justify-between ">
            <h2 class="font-bold text-6xl text-black ">Profile Data<span class="text-orange-500">.</span></h2>
            <div class="text-black">
                <h2 class="font-medium text-xl">User Data:</h2>
                <div class="flex gap-5">
                    <div class="flex gap-2 items-center">
                        <div class=" py-1"> <img src="/gender.png" class="w-5" alt=""></div>
                        <h4 class="font-thin"><%= user.gender %></h4>
                    </div>
                    <div class="flex gap-2 items-center">
                        <div class=" py-1"> <img src="/calendar.png" class="w-5" alt=""></div>
                        <h4 class="font-thin"><%= user.age %> Yrs old</h4>
                    </div>

                </div>
                <h2 class="font-medium text-xl mt-6">Engagements:</h2>
                <div class="flex gap-5">
                    <div class="flex gap-2 items-center">
                        <div class=" py-1"> <img src="/liked.png" class="w-5" alt=""></div>
                        <h4 class="font-thin">1055</h4>
                    </div>
                    <div class="flex gap-2 items-center">
                        <div class=" py-1"> <img src="/loved.png" class="w-5" alt=""></div>
                        <h4 class="font-thin">654</h4>
                    </div>

                </div>
            </div>
            <button class="bg-black  text-white px-3 py-1 text-xl rounded-md font-medium w-32 self-end">Log out<span class="text-orange-500">.</span></button>
         </div>
        <div class="w-2/4 h-full bg-blue-400 drop-shadow-md p-3 rounded-xl flex flex-col justify-between">
           <h2 class="font-bold text-6xl text-white">Featured Status<span class="text-orange-500">.</span></h2>
           <p class="text-white -mt-16 text-3xl font-thin">"Our greatest glory is not in never falling, but in rising every time we fall".</p>
           <button class="bg-black  text-white px-3 py-1 text-xl rounded-md font-medium w-28 self-end">Change<span class="text-orange-500">.</span></button>
        </div>
    </div>

    
    <div class="write w-2/5 mt-6 h-60 bg-white drop-shadow-md rounded-xl p-3 flex gap-3 flex-col items-center">
        <div class="flex items-center gap-2 self-start">
            <div class="profile">
                <div class="w-12 h-12 bg-black rounded-full overflow-hidden"> <img src="/<%= user.profilePic %>" class="w-full h-full object-cover" alt=""></div>
            </div>
            <h2 class="text-xl font-semibold"><%= user.name %></h2>
        </div>
        
        <form class="w-full h-3/4 flex gap-3 flex-col items-center" action="/user/post" method="post">
            <textarea name="content" id="userText" class="border-b-2 w-full h-3/4 p-2 text-xl rounded-xl outline-none" placeholder="What's on your mind, John?"></textarea>
            <button type="submit" class="bg-blue-400 text-white px-11 rounded-3xl text-2xl font-semibold py-2 self-end">Post</button>
        </form>
       
        </div>
        
    <div class=" w-2/5 mt-3 h-20 bg-zinc-900 rounded-xl p-3 flex   items-center justify-center">
        <h2 class="font-bold text-white text-3xl">Your Posts<span class="text-orange-500 text-4xl">.</span></h2>
    </div>

    <div class="read w-2/5 min-h-60 bg-transparent drop-shadow-md rounded-xl flex gap-5 flex-col items-center">
        
        <% user.posts.reverse().forEach(element => {%>
            
            <div class="post bg-white w-full min-h-20 px-3 pt-3 flex flex-col rounded-lg justify-between drop-shadow-sm gap-3" id>
                
                <div class="panel w-36 h-28 bg-zinc-50 absolute drop-shadow-lg self-end hidden" id="<%= element._id %>">
                   
                        <div class="w-full h-1/3 border-b-2 border-zinc-300 flex items-center font-sans font-medium p-2 hover:bg-zinc-200" onclick="editClick('<%= element._id %>')"><p>Edit post</p></div>
                    
                    <a href="">
                        <div class="w-full h-1/3 border-b-2 border-zinc-300 flex items-center font-sans font-medium p-2 hover:bg-zinc-200"><p>Delete post</p></div>
                    </a>
                    
                        <div class="w-full h-1/3  flex items-center font-sans font-medium p-2 hover:bg-zinc-200" onclick="cancelClick('<%= element._id %>')"><p>Cancel</p></div>
                   
                </div>
                <div class="flex items-start gap-2 justify-between">
                    <div class="flex gap-2 items-center">

                        <div class="profile-pic">
                            <div class="w-10 h-10 bg-black rounded-full overflow-hidden"> <img src="/<%= user.profilePic %>" class="w-full h-full object-cover"  alt=""></div>
                        </div>
                        <div class="flex flex-col">
                            <h2 class="text-lg font-normal text-blue-600"><%= user.name %></h2>
                            <h4 class="text-xs"><%= element.date %></h4>
                        </div>
                    </div>
                    
                        <div class="w-6 justify-self-end hover:cursor-pointer menu" onclick="menuClick('<%= element._id %>')" > 
                            <img src="/dots.png" class="w-full h-full object-cover"   alt="">
                        </div>
                    
                </div>
                <div class="content">
                    <p><%= element.content %></p>
                    
                </div>
               
                <div class="btns border-t-2 flex justify-between px-4 py-1">
    
                    <div class="flex gap-2 justify-center items-center w-1/3 hover:bg-zinc-100 cursor-pointer">
                        <a href="/like/<%= element._id %>">
                            <div class=" py-1"> <img src="<%= element.likes.indexOf(user._id) === -1 ? "/like.png" : "/liked.png" %>" class="w-5" alt=""></div>
                        </a>
                        <h4 class="font-thin"><%= element.likes.length %></h4>
                    </div>
                    <div class="flex gap-2 justify-center items-center w-1/3 hover:bg-zinc-100 cursor-pointer">
                        <a href="/react/<%= element._id %>">
                            <div class="  py-2"> <img src="<%= element.hearts.indexOf(user._id) === -1 ? "/love.png" : "/loved.png" %>" class="w-5" alt=""></div>
                        </a>
                        <h4 class="font-thin"><%= element.hearts.length %></h4>
                    </div>
                    <div class="flex gap-1 justify-center items-center w-1/3 hover:bg-zinc-100 cursor-pointer">
                        <div class="  py-2"> <img src="/share.png" class="w-5" alt=""></div>
                    </div>
                   
                   
                    
                    
                </div>
            </div>
        <% }); %>

       

    </div>
   </main>
<script>
//    document.querySelector(".read").addEventListener("click",(e)=>{
//     document.getElementById(`${e.target.id}`).classList.remove("hidden");
//     console.log(e.target.id);
//    })

   function menuClick(id){
    document.getElementById(`${id}`).classList.remove("hidden");
   }
   function cancelClick(id){
    document.getElementById(`${id}`).classList.add("hidden");
   }
   function editClick(id){
    document.querySelector(`.edit-box`).classList.remove("invisible");
   
    console.log(id);
   }
   function cancelEdit(){
    document.querySelector(`.edit-box`).classList.add("invisible");
   }
</script>
</body>
</html>